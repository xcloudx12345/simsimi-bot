// Generated by CoffeeScript 2.6.1
var Simsimi, fetch;

fetch = require("node-fetch");

Simsimi = class Simsimi {
  constructor(token1) {
    this.token = token1;
  }

  request(content, language, token) {
    var params, tokenToUse, url;
    tokenToUse = token ? token : this.token;
    url = new URL('https://api-sv2.simsimi.net/v2/');
    params = {
      text: content,
      lc: language,
      cf: false
    };
    url.search = new URLSearchParams(params).toString();
    return new Promise(function(resolve, reject) {
      return fetch(url).then(async function(res) {
        var data;
        data = (await res.json().catch(function() {
          return {};
        }));
        if (!data) {
          console.log((await res.text()));
        }
        return resolve(data);
      });
    });
  }

};

module.exports = Simsimi;
